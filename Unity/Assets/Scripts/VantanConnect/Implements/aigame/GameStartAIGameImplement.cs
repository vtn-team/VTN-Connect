using Cysharp.Threading.Tasks;
using System;
using UnityEngine;


/// リクエストパラメータなし


/// <summary>
/// 戻り値
/// </summary>
public class GameStartAIGameResult
{
    public int Status;
    public string GameHash;
    public UserData[] GameUsers;
    public GameInfo[] GameInfo;
}

/// <summary>
/// ゲーム終了(AIゲーム用)
/// NOTE: https://candle-stoplight-544.notion.site/API-def8a39d6b524c0fbf9e1a552d4b5428#16a39cbfbab9809c83d5efe15acd0e52
/// </summary>
public class GameStartAIGameImplement
{
    /// <summary>
    /// ゲーム終了(AIゲーム用)
    /// </summary>
    /// <param name="instance">APIインスタンス</param>
    /// <returns>リザルト</returns>
    async public UniTask<GameStartAIGameResult> Request(GameAPI instance)
    {
        string request = String.Format("{0}/ai/gamestart", ProjectSettings.APIServerURI);
        string json = await Network.WebRequest.PostRequest(request, "{}");
        var ret = JsonUtility.FromJson<GameStartAIGameResult>(json);
        instance.StoreGameHash(ret.GameHash);
        instance.StoreAIGameUsers(ret.GameUsers);
        return ret;
    }
}
